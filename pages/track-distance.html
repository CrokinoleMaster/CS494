<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Web Maps How-To</title><link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure.css"><!--[if lte IE 8]><link rel="stylesheet" href="css/layouts/side-menu-old-ie.css"><![endif]--><!--if gt IE 8--><link rel="stylesheet" href="/CS494/css/layouts/side-menu.css"><link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/tomorrow-night.min.css"><link rel="stylesheet" href="/CS494/css/main.css"><script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script><!--<![endif]--></head><body><div id="layout"><a id="menuLink" href="#menu" class="menu-link"><span></span></a><div id="menu"><div class="pure-menu pure-menu-open"><a href="#" class="pure-menu-heading">CONTENT</a><ul><li><a href="/CS494/index.html">Home</a></li><li><a href="/CS494/pages/algorithms.html">algorithms</a></li><li><a href="/CS494/pages/current-position.html">current position</a></li><li class="pure-menu-selected"><a href="/CS494/pages/track-distance.html">track distance</a></li><li><a href="/CS494/pages/leaflet-legends.html">leaflet legends</a></li><li><a href="/CS494/pages/getting-started.html">getting started</a></li><li><a href="/CS494/pages/libraries.html">libraries</a></li><li><a href="/CS494/pages/extra-credit.html">extra-credit</a></li></ul></div></div><div id="main"><div class="content"><h1>Using Our Simple Setup</h1>
<p>We can easily use our simple setup for other functionalities.
The previous articles went over the basic algorithms and how to get current
position. We can use some of the things from there to easily calculate the
perpendicular distance between current position and a polyline in &quot;real-time&quot;.</p>
<p>In a <code>watchLocation</code> function like the one in the previous section, we can simply
call the function from the algorithms page.</p>
<pre><code class="language-javascript">this.watchLocation = function(){

    ...

    window.setInterval(getPosition, 1000);
    function getPosition(){
        navigator.geolocation.getCurrentPosition(function(position){

            ...

            // assuming we made a polyline with pointA and pointB
            if (pointA &amp;&amp; pointB){
                app.trackDist = getTrackDist(pointA, pointB, app.posCurrent);
            }
            // here you can do whatever you want with trackDist
            // we will trigger a JQuery event
            $(app).trigger(&#39;move&#39;, [app.trackDist, /* other variables to pass */]);

        }, errorCallback, { enableHighAccuracy: true });
    }
};</code></pre>
<p>From here you can update the DOM, or do something to the map. Other calculations
can be done in the same way. This keeps data up to date with your current location.</p>
</div></div></div><script>hljs.configure({tabReplace: '<span class="indent">\t</span>'})
hljs.initHighlightingOnLoad();</script></body></html>